<html>

<head>
  <meta charset="utf-8">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.min.css" integrity="sha512-0AUO8B5ll9y1ERV/55xq3HeccBGnvAJQsVGitNac/iQCLyDTGLUBMPqlupIWp/rJg0hV3WWHusXchEIdqFAv1Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/theme/white.min.css" integrity="sha512-NJYOiL4HPnu7QvvGcvHAnVVz2X6qWcTDAH4x3fmUOW/SGUbK46IbzHhQ1KoKDfK2trs5RwUu03Ax9sxjqz1iQw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/plugin/highlight/monokai.min.css" integrity="sha512-z8wQkuDRFwCBfoj7KOiu1MECaRVoXx6rZQWL21x0BsVVH7JkqCp1Otf39qve6CrCycOOL5o9vgfII5Smds23rg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="assets/style.css" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <section data-markdown>
        <textarea data-template>
          ##### Datengewinnung und -analyse
          # 2. Datenbanken und SQL

          <p style="text-align: right; padding-top: 3em;">Markus Schanta</p>
          <p style="text-align: right">
            <img src='assets/0-logo-fh.png' width="100px" height="124px" />
          </p>

        </textarea>
      </section>

      <section>
        <section>
          <h2>Architektur einer Webapplikation</h2>
          <img data-src="assets/1-7-1-architecture.png" style="max-width: 70%; margin: 0;">
        </section>
        <section>
          <h2>Komponenten einer Datenbank</h2>
          <img data-src="assets/1-5-db-architecture.png" style="max-width: 80%; margin: 0;">
        </section>
        <section>
          <h2>Aufbau einer Tabelle</h2>
          <img data-src="assets/2-3-products.png" style="max-width: 70%; margin: 0;">
        </section>
        <section>
          <h2>Entity-Relationship Diagramm</h2>
          <img data-src="assets/2-1-er-w3schools.png" style="max-width: 45%; margin: 0;">
        </section>
        <section>
          <h2>ER Notationen</h2>
          <img data-src="assets/2-2-er-representations.png" style="max-width: 45%; margin: 0;">
        </section>
        <section>
          <h2>Primary Key / Foreign Key</h2>
          <img data-src="assets/2-1-er-w3schools.png" style="max-width: 45%; margin: 0;">
        </section>
      </section>

      <section>
        <section>
          <h2>Der Begriff "Datenbank"</h2>
          <p>bezeichnet</p>
          <ol>
            <li class="fragment" data-fragment-index="1">eine strukturierte Sammlung von Daten (= Schema + Tabelleninhalte) und </li>
            <li class="fragment" data-fragment-index="2">Mechanismen und Protokolle zur Verwaltung dieser Daten.</li>
          </ol>
        </section>
        <section>
          <h2>SQL</h2>
          <ul>
            <li class="fragment" data-fragment-index="1"><strong>SQL</strong> ist ein Akronym für <strong>S</strong>tructured <strong>Q</strong>uery <strong>L</strong>anguage</strong>.</li>
            <li class="fragment" data-fragment-index="2">Erstmals 1974 veröffentlicht, seit den 1990ern als Standard etabliert.</li>
            <li class="fragment" data-fragment-index="3">Vier Hauptfunktionen:<br/>
              <ol>
                <li>Create (Schlüsselwort <code class="hljs-keyword">INSERT</code>)</li>
                <strong><li>Retreive (Schlüsselwort <code class="hljs-keyword">SELECT</code>)</li></strong>
                <li>Update (Schlüsselwort <code class="hljs-keyword">UPDATE</code>)</li>
                <li>Delete (Schlüsselwort <code class="hljs-keyword">DELETE</code>)</li>
              </ol>
            </li>
          </ul>
        </section>
        <section>
          <h2>SQL: Ausgangspunkt ist eine Tabelle</h2>
          <img data-src="assets/2-4-customers.png" style="max-width: 70%; margin: 0;">
        </section>
        <section>
          <h2>Request -> Response</h2>
          <img data-src="assets/2-5-request-response.jpg" style="max-width: 70%; margin: 0;">
        </section>
      </section>

      <section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">SELECT</code>-Abfragen
            * Grundstruktur einer SQL-Abfrage: <!-- .element: class="fragment" -->
              ```sql
              SELECT spalte1, spalte2, ...
              FROM tabellenname
              ```
            * <!-- .element: class="fragment" --> <code class="hljs-keyword">SELECT</code> gibt an, welche Spalten ausgewählt werden 
            * <!-- .element: class="fragment" --> <code class="hljs-keyword">FROM</code> gibt an, aus welcher Tabelle die Daten stammen
            * <!-- .element: class="fragment" --> Spalte <code>CustomerName</code> aus der Tabelle <code>Customers</code> auswählen:
              ```sql
              SELECT CustomerName
              FROM Customers
              ``` 
            * <!-- .element: class="fragment" --> Alle Spalten aus der Tabelle <code>Customers</code> auswählen:
              ```sql
              SELECT *
              FROM Customers
              ``` 
          </textarea>
        </section>
        <section>
          <h2>W3Schools SQL Editor</h2>
          <img data-src="assets/2-5-w3schools-editor.png" style="max-width: 80%; margin: 0;">
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">SELECT</code> Beispiel 1
            * Die Spalte <code>ContactName</code> aus der Tabelle <code>Customers</code> auswählen:
              ```sql
              SELECT ContactName
              FROM Customers
              ```
              <!-- .element: class="fragment" --> 
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">SELECT</code> Beispiel 2
            * Die Spalten <code>CustomerName</code> und <code>ContactName</code> aus der Tabelle <code>Customers</code> auswählen:
              ```sql
              SELECT CustomerName, ContactName
              FROM Customers
              ```
              <!-- .element: class="fragment" --> 
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">SELECT</code> Beispiel 3
            * Die Postleitzahl und Stadt aller Kunden ausgeben:
              ```sql
              SELECT PostalCode, City
              FROM Customers
              ```
              <!-- .element: class="fragment" --> 
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">SELECT</code> Beispiel 4
            * Alle Informationen zu allen Kunden ausgeben:
              ```sql
              SELECT *
              FROM Customers
              ```
              <!-- .element: class="fragment" --> 
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">SELECT</code> Zusammenfassung
            * Die Spalte <code>ContactName</code> auswählen:
              ```sql
              SELECT ContactName
              FROM Customers
              ```
            * Die Spalten <code>CustomerName</code> und <code>ContactName</code> ausgeben:
              ```sql
              SELECT CustomerName, ContactName
              FROM Customers
              ```
            * Alle Spalten ausgeben:
              ```sql
              SELECT *
              FROM Customers
              ```
          </textarea>
        </section>
      </section>

      <section>
        <section data-markdown>
          <textarea data-template>
            ## Abfragen mit <code class="hljs-keyword">WHERE</code>-Bedingungen
            * Grundlegende Struktur einer <code class="hljs-keyword">SELECT</code>-Abfrage <br> mit <code class="hljs-keyword">WHERE</code>-Filter:
              ```sql
              SELECT spalte1, spalte2, ...
              FROM tabellenname
              WHERE bedingung1
                  AND/OR bedingung2
                  AND/OR ...;
              ```
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## Operatoren für <code class="hljs-keyword">WHERE</code>-Bedingungen
            | Operator                             | Bedingung                     | Beispiel                                 |
            |:------------------------------------:|:-----------------------------:|:----------------------------------------:|
            | <code>=, !=, <, <=, >, >=</code>.    | Numerische Operatoren         | <code>spalte > 4</code>                  |
            | <code>BETWEEN ... AND ...</code>     | Zahl zwischen zwei Werten     | <code>spalte BETWEEN 1.5 AND 10.5</code> |
            | <code>NOT BETWEEN ... AND ...</code> | Zahl nicht zwischen Werten    | <code>spalte NOT BETWEEN 1 AND 10</code> |
            | <code>IN (...)</code>                | Zahl ist in einer Liste       | <code>spalte IN (2, 4, 6)</code>         |
            | <code>NOT IN (...)</code>            | Zahl ist nicht in einer Liste | <code>spalte NOT IN (1, 3, 5)</code>     |
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">WHERE</code>-Bedingungen Beispiel 1
            * Gib die <code>Namen</code> und <code>Preise</code> aller <code>Produkte</code> mit <br> einem <code>Preis</code> von mehr als <code>50</code> aus:
              ```sql
              SELECT ProductName, Price
              FROM Products
              WHERE Price > 50
              ```
              <!-- .element: class="fragment" --> 
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">WHERE</code>-Bedingungen Beispiel 2
            * Gib die <code>Namen</code> aller <code>Produkte</code> mit <br> einem <code>Preis</code> zwischen <code>10</code> und <code>13</code> aus:
              ```sql
              SELECT ProductName
              FROM Products
              WHERE Price BETWEEN 10 AND 13
              ```
              <!-- .element: class="fragment" --> 
            * <!-- .element: class="fragment" --> <em>alternativ</em>
              ```sql
              SELECT ProductName
              FROM Products
              WHERE Price >= 10 AND Price <= 13
              ```
              <!-- .element: class="fragment" -->
          </textarea>
        </section>
        <section>
          <h2>TODO: Green / Red Arrow</h2>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">WHERE</code>: Operatoren für Strings
            | Operator                             | Bedingung                                       | Beispiel                                                                       |
            |:------------------------------------:|:-----------------------------------------------:|:------------------------------------------------------------------------------:|
            | <code>=</code>                       | Exakte Übereinstimmung <br> (case sensitive)    | <code>col_name = "abc"</code>                                                  |
            | <code>!=</code> oder <code><></code> | Ungleichheit                                    | <code>col_name != "abcd"</code>                                                |
            | <code>LIKE</code>                    | Übereinstimmung <br> (case insensitive)         | <code>col_name LIKE "ABC"</code>                                               |
            | <code>NOT LIKE</code>                | Nicht-Übereinstimmung                           | <code>col_name NOT LIKE   "ABCD"</code>                                        |
            | <code>%</code>                       | Platzhalter für mehrere<br>(oder keine) Zeichen | <code>col_name LIKE "%AT%"</code><br>(findet "AT", "ATTIC", "CAT" oder "BATS") |
            | <code>_</code>                       | Platzhalter für <br> genau ein Zeichen          | <code>col_name LIKE "AN_"</code><br>(findet “AND“ aber nicht “AN")             |
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">WHERE</code>-Bedingungen Beispiel 3
            * Finde alle <code>Kunden</code> in <code>Deutschland</code>:
              ```sql
              SELECT *
              FROM Customers
              WHERE Country = 'Germany'
              ```
              <!-- .element: class="fragment" --> 
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">WHERE</code>-Bedingungen Beispiel 4
            * Finde alle <code>Kunden</code> in <code>Ländern</code>, die mit <code>„land“</code> enden:
              ```sql
              SELECT *
              FROM Customers
              WHERE Country LIKE '%land'
              ```
              <!-- .element: class="fragment" --> 
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">WHERE</code>-Bedingungen Beispiel 5
            * Finde alle <code>Kunden</code> in <code>Ländern</code> mit einer vierstelligen <code>Postleitzahl</code>:
              ```sql
              SELECT *
              FROM Customers
              WHERE PostalCode LIKE '____' 
              ```
              <!-- .element: class="fragment" --> 
          </textarea>
        </section>
      </section>

      <section>
        <section>
          <h2>SQL-Abfragen in Google Colab</h2>
        </section>
      </section>

      <section>
        <section data-markdown>
          <textarea data-template>
            ## Sortierung mit <code class="hljs-keyword">ORDER BY</code>
            * Sortiert das Ergebnis nach der angegebenen Spalte: <!-- .element: class="fragment" -->
              ```sql
              SELECT spalte1, spalte2, ...
              FROM tabellenname
              WHERE bedingung
              ORDER BY spalte1 [ASC|DESC]
              ```
            * <!-- .element: class="fragment" --> Standardmäßig aufsteigend (<code class="hljs-keyword">ASC</code>)
            * <!-- .element: class="fragment" --> Absteigend mit <code class="hljs-keyword">DESC</code>
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">ORDER BY</code> Beispiel 1
            * Gib alle <code>Produkte</code> sortiert nach <code>Preis</code> aus:
              ```sql
              SELECT *
              FROM Products
              ORDER BY Price ASC
              ```
              <!-- .element: class="fragment" -->
          </textarea>
        </section>
      </section>

      <section>
        <section data-markdown>
          <textarea data-template>
            ## De-Duplizierung mit <code class="hljs-keyword">DISTINCT</code>
            * Entfernt doppelte Einträge aus dem Ergebnis: <!-- .element: class="fragment" -->
              ```sql
              SELECT DISTINCT spalte1
              FROM tabellenname
              WHERE bedingung
              ```
          </textarea>
        </section>
      </section>

      <section>
        <section data-markdown>
          <textarea data-template>
            ## Gruppierung & Aggregatfunktionen
            * <!-- .element: class="fragment" --> Gruppierung mit <code class="hljs-keyword">GROUP BY</code>: 
              ```sql
              SELECT CategoryID
              FROM Products
              GROUP BY CategoryID
              ```
              <!-- .element: class="fragment" -->
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## Gruppierung & Aggregatfunktionen
            * <!-- .element: class="fragment" --> Gruppierung mit <code class="hljs-keyword">GROUP BY</code> und<br>Aggregatfunktion <code class="hljs-keyword">COUNT()</code>: 
              ```sql
              SELECT CategoryID, COUNT(ProductID)
              FROM Products
              GROUP BY CategoryID
              ```
              <!-- .element: class="fragment" -->
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## Aggregatfunktionen in SQL
            | Funktion                   | Bedeutung                                                                                   |
            |:--------------------------:|:-------------------------------------------------------------------------------------------:|
            | <code>COUNT(*)</code>      | Anzahl aller Zeilen                                                                         |
            | <code>COUNT(spalte)</code> | Anzahl nicht-null Werte in <code>spalte</code>                                              |
            | <code>MIN(spalte)</code>   | Kleinster Wert in <code>spalte</code>.<br><code>spalte</code> muss numerisch sein.          |
            | <code>MAX(spalte)</code>   | Größter Wert in <code>spalte</code>.<br><code>spalte</code> muss numerisch sein.            |
            | <code>AVG(spalte)</code>   | Durchschnittlicher Wert in <code>spalte</code>.<br><code>spalte</code> muss numerisch sein. |
            | <code>SUM(spalte)</code>   | Summe aller Werte in <code>spalte</code>.<br><code>spalte</code> muss numerisch sein.       |
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">GROUP BY</code> Beispiel 1
            * Gib den durchschnittlichen <code>Preis</code><br> pro <code>Produktkategorie</code> aus:
              ```sql
              SELECT CategoryID, AVG(Price)
              FROM Products
              GROUP BY CategoryID
              ```
              <!-- .element: class="fragment" -->
          </textarea>
        </section>
      </section>

      <section>
        <section>
          <h2>Normalisierung</h2>
            <div style="display: flex; width: 100%; gap: 20px;">
              <div style="flex: 1; display: flex; align-items: center; justify-content: center;">
                <img data-src="assets/2-1-er-w3schools.png" style="max-width: 100%; margin: 0;">
              </div>
              <div style="flex: 1; display: flex; flex-direction: column; gap: 20px;">
                <div style="flex: 1; display: flex; align-items: center; justify-content: center;">
                  <img data-src="assets/2-3-products.png" style="max-width: 100%; margin: 0;">
                </div>
                <div style="flex: 1; display: flex; align-items: center; justify-content: center;">
                  <img data-src="assets/2-6-categories.png" style="max-width: 100%; margin: 0;">
                </div>
              </div>
            </div>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## Joins von Tabellen
            * <!-- .element: class="fragment" --> <code class="hljs-keyword">LEFT JOIN</code> der Tabellen <code>Products</code> und <code>Categories</code>: 
              ```sql
              SELECT * 
              FROM Products 
              LEFT JOIN Categories
                ON Products.CategoryID = Categories.CategoryID
              ```
              <!-- .element: class="fragment" -->
              <img data-src="assets/2-7-join.png" style="max-width: 100%; margin: 0;"><!-- .element: class="fragment" -->
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">JOIN</code> Beispiel 1
            * <!-- .element: class="fragment" --> Gib alle <code>Produkte</code> aus der <code>Produktkategorie Produce</code> aus: 
              ```sql
              SELECT *
              FROM Products 
              LEFT JOIN Categories
                ON Products.CategoryID = Categories.CategoryID
              WHERE CategoryName='Produce'
              ```
              <!-- .element: class="fragment" -->
              <img data-src="assets/2-8-join-produce.png" style="max-width: 100%; margin: 0;"><!-- .element: class="fragment" -->
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">JOIN</code> Beispiel 2
            * <!-- .element: class="fragment" --> Gib die Anzahl der <code>Produkte</code> pro <code>Produktkategorie</code> aus: 
              ```sql
              SELECT CategoryName, COUNT(ProductID) as ProductIDCount
              FROM Products 
              LEFT JOIN Categories
                ON Products.CategoryID = Categories.CategoryID
              GROUP BY CategoryName
              ```
              <!-- .element: class="fragment" -->
              <img data-src="assets/2-9-join-count.png" style="max-width: 100%; margin: 0;"><!-- .element: class="fragment" -->
          </textarea>
        </section>
        <section data-markdown>
          <textarea data-template>
            ## <code class="hljs-keyword">JOIN</code> Beispiel 3
            * <!-- .element: class="fragment" --> <code>JOIN</code> über mehrere Tabellen: Gib alle <code>Produkte</code> mit <code>Lieferantenname</code> und <code>Produktkategorie</code> aus: 
              ```sql
              SELECT *
              FROM Products p
              LEFT JOIN Categories c
                ON p.CategoryID=c.CategoryID
              LEFT JOIN Suppliers s 
                ON p.SupplierID=s.SupplierID
              ```
              <!-- .element: class="fragment" -->
          </textarea>
        </section>
      </section>
      
      <section>
        <section>
          <h2>Fragen?</h2>
        </section>
        <section>
          <h2>Nächste Schritte</h2>
            <ul>
              <li>Folien & Materialien der heutigen Einheit auf Moodle</li>
              <li>Nächste Einheit: Do. 4.12. 18:30</li>
            </ul>
        </section>
        <section>
          <h2>Danke und schönen Abend!</h2>
        </section>
      </section>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.min.js" integrity="sha512-sMRSj1Ns64C2OE6VNS7WrV63OHW7dLAvi96CXRoy9AEe/tKF+868fhUJpc5ZKS166lwhe2ArCYjFitLJUY+VWA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/plugin/markdown/markdown.min.js" integrity="sha512-4exkEeyVuaWUFKozXl6L3UCugl6ai1cKnrVFkWUstdrNB2sDxxmPEaHBzTlYm9wX78EjPzEBG0s8k37oPeUFIw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/plugin/notes/notes.min.js" integrity="sha512-tDzEYXTFwGOO3tWp8oTV3yGeZ4lG4gUt+tJFQTsP7W4jV/MJ1Rgr6m9aICicjh/ymL5GD6jkHXDi9cHKfctFGQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/plugin/highlight/highlight.min.js" integrity="sha512-xkVKkN0o7xECTHSUZ9zdsBYRXiAKH7CZ3aICpW6aQJZsufVVRLhEBTDjTpC1tPzm+gNZiOeW174zXAB2fOLsTg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
    Reveal.initialize({
      plugins: [RevealMarkdown, RevealNotes, RevealHighlight],
      hash: true
    });
  </script>
</body>

</html>
